<?php
/*   _______________________________________
    |  Dikembangkan oleh - Raden Parhanudin |
    |    Whatsapp: https://6282342788059    |
    |_______________________________________|
*/
 namespace Modules\DataReferensi\Http\Controllers; use App\Http\Controllers\Controller; use Illuminate\Http\Request; use Modules\DataReferensi\Entities\GajiPokok; use Modules\DataReferensi\Entities\Golongan; use Modules\DataReferensi\Entities\JenisFormasi; use Yajra\DataTables\Facades\DataTables; class GajiPokokController extends Controller { public function index() { $jenis_formasis = JenisFormasi::orderBy("\x6e\x61\x6d\141")->get(); return view("\144\x61\x74\141\162\x65\x66\x65\x72\x65\x6e\163\x69\x3a\72\x67\141\152\151\x2d\160\157\x6b\157\153\56\151\156\144\x65\170", compact("\x6a\x65\156\151\163\137\x66\x6f\162\155\141\x73\151\x73")); } public function update(Request $request) { if (!empty($request->tahun)) { $golongans = Golongan::all(); foreach ($golongans as $golongan) { goto oGf32; pNB0o: $response = $this->getRequest("\163\x69\x61\x73\x6e\x2d\151\x6e\163\164\141\156\x73\x69\57\x72\x65\x66\145\162\x65\x6e\x73\x69\57\147\x61\152\x69\55\160\157\153\x6f\x6b\77{$query}"); goto IsBJJ; oGf32: $query = http_build_query(["\x6a\145\156\x69\x73\137\x66\x6f\x72\155\x61\163\x69\137\151\x64" => "\60\x32\60\x33", "\147\x6f\x6c\x6f\x6e\147\141\x6e\137\x69\x64" => $golongan->id, "\164\x61\x68\x75\x6e" => $request->tahun]); goto pNB0o; IsBJJ: if (isset($response["\162\x65\x73\x75\154\164\x73"])) { foreach ($response["\x72\x65\163\165\x6c\x74\163"] as $data) { GajiPokok::updateOrCreate(["\x69\144" => $data["\151\x64"]], $data); } } goto AHEy6; AHEy6: } } return redirect()->back(); } public function datatable(Request $request) { if ($request->ajax()) { $data = GajiPokok::query()->with("\x67\x6f\x6c\x6f\x6e\x67\141\156")->select("\147\x61\x6a\x69\x5f\x70\157\x6b\157\153\163\56\52"); return DataTables::eloquent($data)->addColumn("\147\157\154\x6f\156\x67\x61\156", function ($data) { return $data->golongan->nama ?? ''; })->editColumn("\x67\x61\x6a\151\x5f\x70\157\153\157\x6b", function ($data) { return number_format($data->gaji_pokok); })->toJson(); } } }
