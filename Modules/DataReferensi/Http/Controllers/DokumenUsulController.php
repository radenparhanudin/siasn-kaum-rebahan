<?php
/*   _______________________________________
    |  Dikembangkan oleh - Raden Parhanudin |
    |    Whatsapp: https://6282342788059    |
    |_______________________________________|
*/
 namespace Modules\DataReferensi\Http\Controllers; use App\Http\Controllers\Controller; use Illuminate\Http\Request; use Modules\DataReferensi\Entities\DokumenUsul; use Yajra\DataTables\Facades\DataTables; class DokumenUsulController extends Controller { public function index() { return view("\144\x61\x74\x61\x72\145\146\x65\162\145\x6e\x73\151\x3a\x3a\x64\x6f\153\x75\x6d\x65\156\x2d\x75\163\x75\x6c\x2e\151\x6e\x64\x65\170"); } public function update(Request $request) { if ($request->ajax()) { goto rgoAN; b8kdI: return $this->sendResponse(true, "\x55\160\144\141\164\145\40\x64\x61\164\141\x20\x62\145\162\x68\x61\x73\x69\x6c"); goto x0CD_; HZg92: if (!isset($response["\x72\x65\163\165\154\164\163"])) { return $this->sendResponse(false, $response["\x6d\145\x73\x73\x61\x67\145"]); } goto jN4pR; rgoAN: $response = $this->getRequest("\x73\151\141\x73\156\55\151\x6e\x73\164\x61\x6e\163\151\x2f\x72\145\146\145\162\x65\156\163\x69\57\x64\x6f\x6b\x75\155\x65\x6e\x2d\165\163\165\x6c"); goto HZg92; jN4pR: foreach ($response["\162\145\163\x75\x6c\x74\x73"] as $data) { $data["\144\x65\164\141\x69\x6c\137\x6c\141\x79\141\x6e\x61\x6e\x5f\x69\x64"] = $data["\x64\x65\164\x61\x69\154\137\154\x61\171\x61\x6e\x61\x6e\x5f\151\144"] == '' ? null : $data["\x64\x65\x74\x61\151\154\137\x6c\x61\171\x61\156\x61\x6e\137\x69\x64"]; DokumenUsul::updateOrCreate(["\x69\x64" => $data["\x69\144"]], $data); } goto b8kdI; x0CD_: } } public function datatable(Request $request) { if ($request->ajax()) { $data = DokumenUsul::query()->with("\x6c\x61\171\x61\x6e\x61\156", "\x73\165\142\137\x6c\x61\171\x61\156\141\x6e", "\144\x65\164\x61\151\x6c\137\154\141\171\x61\x6e\141\156")->select("\144\157\x6b\165\x6d\x65\156\x5f\x75\163\165\154\x73\56\x2a"); return DataTables::eloquent($data)->addColumn("\x64\145\164\x61\x69\x6c\x5f\154\141\171\141\x6e\x61\x6e", function ($data) { return $data->detail_layanan->detail_layanan ?? ''; })->addColumn("\x73\165\142\137\x6c\141\171\141\156\x61\x6e", function ($data) { return $data->sub_layanan->sub_layanan ?? ''; })->addColumn("\154\141\171\141\x6e\141\156", function ($data) { return $data->layanan->layanan ?? ''; })->toJson(); } } }
