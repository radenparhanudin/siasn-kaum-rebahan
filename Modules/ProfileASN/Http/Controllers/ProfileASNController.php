<?php
/*   _______________________________________
    |  Dikembangkan oleh - Raden Parhanudin |
    |    Whatsapp: https://6282342788059    |
    |_______________________________________|
*/
 namespace Modules\ProfileASN\Http\Controllers; use App\Http\Controllers\Controller; use App\Traits\SelisihTanggal; use Carbon\Carbon; use Illuminate\Http\Request; use Maatwebsite\Excel\Facades\Excel; use Modules\DataReferensi\Entities\Agama; use Modules\DataReferensi\Entities\Eselon; use Modules\DataReferensi\Entities\Golongan; use Modules\DataReferensi\Entities\JenisJabatan; use Modules\DataReferensi\Entities\KedudukanHukum; use Modules\DataReferensi\Entities\Lokasi; use Modules\DataReferensi\Entities\TingkatPendidikan; use Modules\ProfileASN\Entities\Asn; use Modules\ProfileASN\Exports\ProfileASNExport; use Yajra\DataTables\Facades\DataTables; class ProfileASNController extends Controller { use SelisihTanggal; public function index() { $data = ["\x6b\x65\144\x75\144\165\153\x61\x6e\x5f\x68\165\153\165\155\x73" => KedudukanHukum::withCount("\141\163\156\x73")->get()->where("\x61\x73\x6e\x73\137\x63\157\x75\156\164", "\x3e", 0), "\152\x65\156\x69\163\x5f\x6a\141\x62\141\164\141\156\163" => JenisJabatan::orderBy("\x69\x64")->get(), "\x61\x67\141\x6d\141\163" => Agama::orderBy("\151\x64")->get(), "\154\x6f\x6b\x61\163\151\163" => Lokasi::whereJenis("\113\102")->orderBy("\151\x64")->get(), "\x65\163\145\154\157\x6e\163" => Eselon::orderBy("\x69\x64")->get(), "\x67\x6f\154\157\156\147\141\156\x73" => Golongan::orderBy("\x69\144")->get(), "\x74\x69\x6e\147\x6b\141\x74\137\x70\145\x6e\144\151\x64\151\x6b\x61\156\x73" => TingkatPendidikan::orderBy("\x69\x64")->get()]; return view("\160\162\x6f\146\151\154\x65\x61\163\x6e\x3a\x3a\160\x72\157\x66\x69\x6c\145\x2d\x61\x73\156\x2e\151\156\x64\145\x78", compact("\x64\x61\164\x61")); } public function store(Request $request) { if ($request->ajax()) { goto SvzFT; SvzFT: $nips = explode("\15\12", $request->nip); goto tg4Qe; w1DGv: return $this->sendResponse(true, "\104\157\167\156\x6c\157\x61\144\40\x64\x61\164\x61\x20\101\x53\x4e\40\x73\145\x6c\x65\163\141\151"); goto kplh7; tg4Qe: foreach ($nips as $nip) { $asn = Asn::whereNipBaru($nip)->first(); if (!isset($asn)) { $response = $this->getRequest("\163\x69\141\x73\156\x2d\151\156\163\x74\141\156\163\x69\x2f\x61\163\156\57\x70\162\x6f\146\x69\154\x65\x3f\156\151\160\137\x62\141\162\165\x3d{$nip}"); if (!isset($response["\x65\x72\162\157\162"])) { return $this->sendResponse(false, $response["\x6d\x65\x73\x73\141\147\145"]); } else { if ($response["\145\x72\162\157\162"]) { return $this->sendResponse(false, $response["\155\x65\x73\x73\141\x67\x65"]); } else { $asn = $response["\x72\145\163\165\x6c\164\x73"][0]; Asn::updateOrCreate(["\x69\x64" => $asn["\151\144"]], ["\151\x64" => $asn["\x69\x64"], "\x6e\x69\160\x5f\x6c\141\155\x61" => $asn["\x6e\x69\x70\137\x6c\141\x6d\141"], "\x6e\x69\160\137\142\x61\x72\165" => $asn["\156\151\x70\137\142\141\x72\165"], "\156\x61\x6d\141" => $asn["\156\x61\x6d\x61"], "\x6e\x61\155\x61\x5f\x6c\x65\x6e\147\x6b\141\160" => $asn["\156\141\155\x61\137\x6c\145\156\x67\153\x61\160"], "\x67\x65\154\141\x72\x5f\144\145\160\141\156" => $asn["\147\x65\x6c\x61\x72\x5f\x64\145\x70\141\156"], "\147\145\x6c\x61\x72\137\142\145\154\141\x6b\x61\x6e\x67" => str_replace("\75", '', $asn["\x67\145\154\141\x72\137\142\x65\x6c\141\153\x61\156\147"]), "\141\x67\141\x6d\141\137\x69\x64" => $asn["\x61\x67\x61\155\141\x5f\151\144"], "\x74\x65\155\160\141\x74\x5f\x6c\x61\x68\x69\162\x5f\151\144" => $asn["\x74\x65\x6d\x70\141\x74\137\x6c\141\x68\151\162\137\x69\x64"], "\x74\141\156\147\147\141\154\137\154\141\x68\x69\x72" => $asn["\x74\x61\156\x67\x67\x61\x6c\x5f\x6c\x61\x68\x69\x72"], "\x6a\145\156\151\163\x5f\x6b\x65\x6c\x61\155\x69\x6e" => $asn["\152\x65\x6e\151\x73\x5f\x6b\145\x6c\141\x6d\x69\x6e"], "\152\x65\x6e\x69\163\137\x6b\141\x77\151\156\137\151\x64" => $asn["\152\x65\156\151\163\x5f\153\141\x77\151\156\x5f\x69\144"], "\156\151\x6b" => $asn["\x6e\x69\x6b"], "\156\157\x6d\157\x72\x5f\150\160" => $asn["\x6e\157\155\x6f\162\x5f\150\x70"], "\156\157\x6d\x6f\x72\137\x74\x65\154\x70\157\156" => $asn["\156\x6f\x6d\157\162\137\164\145\154\160\x6f\x6e"], "\x65\155\x61\x69\x6c" => $asn["\x65\x6d\141\151\154"], "\x65\155\141\151\x6c\137\x67\x6f\166" => $asn["\145\x6d\x61\151\154\x5f\x67\157\x76"], "\141\154\141\x6d\141\x74" => $asn["\x61\x6c\141\x6d\141\164"], "\156\x70\x77\160\x5f\x6e\157\x6d\157\x72" => $asn["\x6e\x70\167\160\x5f\x6e\157\155\x6f\x72"], "\x6e\x6f\x6d\x6f\162\x5f\142\x70\152\x73" => $asn["\156\x6f\155\x6f\x72\137\x62\160\x6a\163"], "\x6a\x65\x6e\x69\163\x5f\160\x65\x67\x61\167\141\151\137\151\144" => $asn["\x6a\145\156\151\163\x5f\160\x65\x67\141\x77\x61\151\x5f\151\x64"], "\x6b\x65\x64\x75\144\165\x6b\x61\156\137\150\165\x6b\165\155\137\151\144" => $asn["\x6b\x65\x64\x75\x64\165\x6b\141\156\x5f\150\165\153\x75\x6d\x5f\x69\x64"], "\163\x74\x61\x74\x75\x73\137\x63\x70\156\163\137\x70\x6e\163" => $asn["\x73\164\141\164\x75\163\137\143\x70\156\x73\x5f\160\x6e\163"], "\153\141\162\x74\x75\137\160\x65\147\141\167\x61\151" => $asn["\153\141\x72\164\165\x5f\160\145\147\x61\167\x61\151"], "\156\x6f\155\157\162\137\x73\x6b\x5f\x63\x70\156\163" => $asn["\156\x6f\155\x6f\x72\137\x73\x6b\137\143\160\156\163"], "\x74\147\x6c\x5f\x73\x6b\137\x63\160\156\x73" => $asn["\x74\147\x6c\137\x73\x6b\x5f\143\x70\156\x73"], "\x74\155\x74\137\143\160\x6e\x73" => $asn["\x74\x6d\x74\x5f\143\x70\156\x73"], "\156\157\x6d\x6f\x72\x5f\163\x6b\x5f\160\x6e\x73" => $asn["\x6e\157\155\x6f\x72\x5f\163\153\x5f\160\x6e\x73"], "\x74\x67\x6c\x5f\x73\x6b\137\160\156\163" => $asn["\164\147\154\x5f\x73\153\137\x70\156\163"], "\164\155\164\x5f\x70\156\163" => $asn["\164\155\x74\x5f\160\156\x73"], "\x67\x6f\154\157\156\x67\x61\x6e\137\x61\167\141\x6c\x5f\151\144" => $asn["\x67\157\154\x6f\x6e\147\x61\x6e\137\141\x77\x61\x6c\x5f\x69\144"], "\147\x6f\154\157\156\147\x61\x6e\137\151\144" => $asn["\147\157\x6c\x6f\156\147\141\156\137\x69\x64"], "\x74\x6d\x74\x5f\x67\x6f\154\157\x6e\147\141\156" => $asn["\164\155\164\x5f\x67\x6f\154\157\x6e\147\141\156"], "\x6d\153\137\164\x61\x68\x75\x6e" => $asn["\155\153\137\164\141\x68\165\x6e"], "\x6d\x6b\x5f\142\x75\154\141\156" => $asn["\x6d\153\x5f\142\165\x6c\x61\156"], "\152\145\x6e\x69\163\137\x6a\141\142\141\x74\x61\156\137\x69\144" => $asn["\x6a\145\156\151\x73\137\152\141\142\x61\x74\141\156\x5f\x69\144"], "\145\x73\x65\154\x6f\156\x5f\x69\144" => $asn["\x65\x73\145\154\x6f\156\137\x69\x64"], "\x6a\146\164\137\151\x64" => $asn["\x6a\146\x74\x5f\x69\144"], "\x6a\146\165\x5f\x69\144" => $asn["\x6a\x66\165\x5f\151\144"], "\164\155\164\x5f\x6a\x61\142\x61\x74\x61\156" => $asn["\164\x6d\164\137\x6a\x61\x62\141\x74\x61\x6e"], "\x74\x6b\x5f\x70\145\x6e\144\151\144\x69\x6b\x61\156\x5f\x69\144" => $asn["\164\x6b\137\x70\145\x6e\x64\151\144\151\153\x61\x6e\137\151\x64"], "\x70\x65\x6e\144\151\x64\151\153\x61\x6e\x5f\x69\x64" => $asn["\160\x65\156\144\x69\x64\x69\153\141\156\x5f\151\x64"], "\164\x61\156\x67\147\141\x6c\x5f\x6c\165\154\165\163" => $asn["\x74\x61\156\147\x67\141\154\x5f\154\x75\x6c\x75\x73"], "\x6b\160\153\x6e\137\151\x64" => $asn["\x6b\160\153\x6e\137\151\x64"], "\154\x6f\153\x61\163\151\x5f\153\145\162\152\141\x5f\151\x64" => $asn["\154\157\153\141\163\151\x5f\153\145\x72\152\x61\137\151\144"], "\165\156\x69\x74\x5f\x6f\162\147\x61\156\151\163\141\163\151\137\151\x64" => $asn["\165\x6e\x69\164\137\157\162\x67\141\x6e\151\x73\141\163\x69\x5f\151\144"], "\163\141\164\165\141\156\137\153\145\x72\x6a\x61\x5f\151\144" => $asn["\163\141\x74\x75\141\x6e\x5f\153\x65\162\152\141\137\x69\144"], "\151\156\x73\x74\x61\x6e\x73\151\137\x69\x64" => $asn["\x69\x6e\163\164\x61\x6e\x73\x69\137\151\x64"]]); } } } } goto w1DGv; kplh7: } } public function datatable(Request $request) { if ($request->ajax()) { $data = Asn::query()->with("\164\x65\155\160\x61\164\x5f\x6c\141\150\x69\x72", "\x6b\x65\x64\x75\144\165\x6b\x61\156\137\150\x75\x6b\x75\x6d")->select("\141\x73\x6e\163\x2e\x2a"); return DataTables::eloquent($data)->addColumn("\153\145\144\x75\144\165\x6b\x61\x6e\x5f\x68\165\153\165\x6d", function ($data) { return $data->kedudukan_hukum->nama ?? ''; })->addColumn("\164\x65\155\160\141\x74\137\154\141\150\x69\x72", function ($data) { goto dyFNJ; HeGbH: if (!empty($tempat_lahir)) { [$tempat_lahir, $_] = explode("\40\x2d\40", $tempat_lahir, 2); } goto hfw91; dyFNJ: $tempat_lahir = $data->tempat_lahir->nama ?? ''; goto QF9rY; hfw91: return !empty($tempat_lahir) ? "{$tempat_lahir}\54\x20{$tanggal_lahir}" : $tanggal_lahir; goto D1VCc; QF9rY: $tanggal_lahir = Carbon::parse($data->tanggal_lahir)->format("\x64\x2d\x6d\x2d\x59"); goto HeGbH; D1VCc: })->orderColumn("\x6e\x69\x70\137\x62\141\162\x75", "\x2d\x75\160\x64\141\x74\145\x64\137\141\x74\x20\x24\x31")->toJson(); } } public function update_referensi(Request $request) { if ($request->ajax()) { goto KPwER; IdXG5: return $this->sendResponse(true, "\125\x70\144\x61\x74\145\x20\x64\x61\164\141\40\x72\145\x66\x65\x72\x65\156\163\x69\40\x73\x65\154\x65\163\141\x69"); goto ABsPv; XRasB: $this->updateKpkn(); goto ua4VF; qGU2F: $this->updatePendidikan(); goto XRasB; toupx: $this->updateJfu(); goto qGU2F; ua4VF: $this->updateUnitOrganisasi(); goto IdXG5; lB9bq: $this->updateLokasiKerja(); goto hzSvE; hzSvE: $this->updateJft(); goto toupx; KPwER: $this->updateTempatLahir(); goto lB9bq; ABsPv: } } public function update(Request $request) { if ($request->ajax()) { goto jpOBO; jpOBO: $asns = Asn::where("\153\145\x64\x75\x64\165\x6b\x61\x6e\x5f\x68\165\x6b\x75\x6d\x5f\151\x64", $request->kedudukan_hukum_id)->where("\165\160\x64\x61\164\x65\144\137\141\164", "\74", Carbon::now()->addDays(-7)->format("\x59\55\x6d\x2d\144\x20\x48\72\x69\72\163"))->limit(10)->get(); goto edqXe; hJUll: return $this->sendResponse(true, "\125\x70\x64\141\164\145\40\144\141\x74\141\x20\101\123\x4e\x20\x73\145\154\x65\x73\141\151"); goto NiUJO; edqXe: foreach ($asns as $asn) { $response = $this->getRequest("\163\151\x61\x73\156\55\x69\x6e\x73\164\141\x6e\163\151\57\141\163\156\x2f\160\162\x6f\146\151\154\145\77\x6e\x69\160\137\x62\141\x72\165\x3d{$asn->nip_baru}"); if ($response["\145\162\162\x6f\162"]) { return $this->sendResponse(false, $response["\x6d\x65\x73\x73\141\147\x65"]); } else { $asn = $response["\x72\145\x73\165\x6c\x74\163"][0]; Asn::updateOrCreate(["\151\144" => $asn["\x69\x64"]], ["\151\x64" => $asn["\151\x64"], "\x6e\x69\160\x5f\154\x61\155\141" => $asn["\156\151\160\137\x6c\x61\155\141"], "\156\151\x70\137\x62\141\x72\165" => $asn["\156\151\x70\x5f\x62\141\x72\165"], "\x6e\141\155\x61" => $asn["\x6e\141\155\x61"], "\x6e\141\155\x61\137\154\x65\156\147\x6b\x61\x70" => $asn["\x6e\141\x6d\141\137\x6c\145\156\x67\153\141\160"], "\x67\145\x6c\141\x72\x5f\144\x65\x70\x61\156" => $asn["\x67\x65\x6c\141\x72\137\144\145\x70\x61\x6e"], "\x67\145\x6c\141\162\137\x62\x65\x6c\x61\x6b\x61\156\147" => str_replace("\75", '', $asn["\x67\145\x6c\141\x72\x5f\142\x65\x6c\141\153\x61\156\x67"]), "\141\x67\141\155\141\x5f\151\144" => $asn["\x61\147\141\x6d\x61\137\151\144"], "\164\145\155\160\141\164\137\154\x61\x68\151\x72\x5f\151\144" => $asn["\164\145\155\160\x61\x74\137\154\x61\x68\151\162\x5f\x69\144"], "\x74\x61\x6e\x67\x67\x61\154\x5f\154\141\x68\x69\x72" => $asn["\x74\x61\156\147\147\141\154\137\x6c\x61\x68\x69\162"], "\152\145\156\151\x73\x5f\x6b\x65\x6c\141\155\x69\x6e" => $asn["\x6a\x65\x6e\151\163\x5f\x6b\145\154\141\155\151\156"], "\152\x65\x6e\151\163\137\153\x61\x77\x69\156\x5f\151\x64" => $asn["\152\x65\x6e\151\x73\x5f\x6b\x61\x77\x69\156\137\x69\144"], "\x6e\x69\153" => $asn["\156\x69\x6b"], "\x6e\157\x6d\x6f\x72\137\150\x70" => $asn["\x6e\x6f\155\157\162\x5f\x68\160"], "\x6e\x6f\155\x6f\x72\137\x74\145\x6c\x70\157\156" => $asn["\x6e\157\x6d\157\x72\x5f\x74\145\154\x70\x6f\156"], "\145\155\141\x69\154" => $asn["\x65\155\x61\x69\x6c"], "\x65\x6d\141\x69\x6c\x5f\147\157\166" => $asn["\x65\x6d\x61\x69\154\137\147\157\166"], "\x61\x6c\x61\155\x61\164" => $asn["\141\154\141\x6d\x61\x74"], "\156\160\167\160\x5f\156\x6f\x6d\x6f\x72" => $asn["\x6e\x70\167\x70\x5f\156\x6f\x6d\157\162"], "\156\157\155\x6f\x72\137\x62\160\x6a\x73" => $asn["\156\157\155\157\162\x5f\x62\x70\152\x73"], "\x6a\x65\156\151\x73\x5f\160\x65\147\x61\x77\141\151\137\x69\144" => $asn["\x6a\x65\x6e\151\163\137\160\x65\147\141\167\x61\151\x5f\x69\144"], "\x6b\145\144\x75\144\165\153\x61\x6e\137\x68\165\153\x75\x6d\x5f\x69\x64" => $asn["\153\x65\x64\165\x64\x75\153\x61\x6e\x5f\x68\165\x6b\x75\155\x5f\151\144"], "\163\164\x61\x74\165\163\137\143\160\x6e\x73\x5f\160\x6e\163" => $asn["\x73\x74\141\164\x75\x73\137\143\x70\x6e\163\137\x70\x6e\x73"], "\x6b\141\162\x74\165\137\x70\x65\x67\141\167\141\x69" => $asn["\153\141\162\x74\x75\137\160\145\x67\x61\x77\x61\151"], "\156\x6f\155\157\162\137\163\153\x5f\x63\160\x6e\x73" => $asn["\156\x6f\x6d\x6f\162\137\x73\x6b\137\x63\160\156\x73"], "\x74\147\x6c\137\163\x6b\x5f\143\x70\156\163" => $asn["\164\147\154\137\163\153\137\143\x70\156\163"], "\x74\x6d\164\x5f\x63\160\156\x73" => $asn["\x74\155\164\x5f\x63\160\156\x73"], "\156\157\155\x6f\162\137\163\x6b\x5f\160\x6e\163" => $asn["\x6e\x6f\x6d\x6f\162\x5f\x73\x6b\137\x70\x6e\x73"], "\x74\x67\154\x5f\163\153\x5f\x70\x6e\163" => $asn["\x74\x67\154\x5f\163\x6b\x5f\160\x6e\163"], "\x74\155\164\137\160\x6e\163" => $asn["\x74\155\x74\x5f\x70\156\x73"], "\147\x6f\154\x6f\x6e\147\141\156\x5f\141\167\x61\x6c\137\x69\x64" => $asn["\147\x6f\154\x6f\156\147\141\156\137\x61\x77\x61\x6c\137\x69\144"], "\147\x6f\x6c\157\156\x67\141\156\x5f\151\x64" => $asn["\x67\157\x6c\157\156\x67\141\156\x5f\151\144"], "\x74\155\x74\137\147\x6f\x6c\x6f\156\x67\x61\x6e" => $asn["\x74\x6d\x74\x5f\x67\x6f\154\157\156\147\x61\x6e"], "\x6d\153\x5f\x74\x61\x68\165\x6e" => $asn["\155\x6b\137\164\x61\x68\x75\156"], "\x6d\153\x5f\x62\x75\154\x61\x6e" => $asn["\155\x6b\137\142\165\x6c\141\156"], "\x6a\x65\156\x69\x73\137\x6a\141\x62\141\164\141\156\x5f\151\144" => $asn["\x6a\x65\156\x69\163\137\152\141\x62\x61\x74\x61\x6e\x5f\151\x64"], "\145\x73\145\154\x6f\156\x5f\151\x64" => $asn["\145\163\145\154\157\156\137\x69\x64"], "\x6a\x66\164\x5f\151\x64" => $asn["\x6a\x66\164\x5f\x69\144"], "\152\x66\165\137\151\x64" => $asn["\152\x66\165\137\x69\144"], "\x74\155\x74\x5f\x6a\141\142\141\164\x61\156" => $asn["\164\155\164\x5f\152\141\x62\x61\x74\141\x6e"], "\164\x6b\137\160\x65\156\x64\x69\144\x69\x6b\141\x6e\x5f\151\144" => $asn["\x74\x6b\x5f\x70\x65\156\x64\151\x64\151\153\141\x6e\x5f\151\x64"], "\160\145\156\144\x69\144\151\x6b\x61\156\x5f\151\144" => $asn["\x70\x65\x6e\144\151\x64\x69\x6b\x61\x6e\x5f\151\x64"], "\164\141\x6e\147\x67\141\x6c\x5f\x6c\165\154\165\163" => $asn["\x74\141\156\x67\147\x61\154\x5f\154\x75\154\165\163"], "\x6b\x70\153\156\x5f\151\x64" => $asn["\x6b\x70\153\156\137\151\144"], "\154\157\x6b\x61\163\151\x5f\153\145\x72\x6a\141\x5f\151\x64" => $asn["\154\157\153\141\x73\x69\x5f\x6b\x65\162\152\141\x5f\x69\144"], "\x75\156\x69\164\x5f\157\162\147\141\156\x69\x73\141\163\x69\x5f\x69\x64" => $asn["\x75\156\x69\x74\137\157\162\x67\141\156\151\x73\141\163\x69\137\151\144"], "\x73\x61\164\x75\x61\156\x5f\153\145\x72\x6a\141\x5f\x69\144" => $asn["\163\141\164\x75\x61\x6e\137\153\x65\x72\x6a\x61\137\151\144"], "\x69\x6e\163\x74\x61\x6e\163\x69\137\x69\x64" => $asn["\151\x6e\163\x74\141\156\163\151\137\x69\144"], "\165\x70\144\141\164\x65\x5f\x74\145\x72\141\x6b\150\151\x72" => date("\131\x2d\x6d\55\x64\40\x48\72\x69\x3a\x73")]); } } goto hJUll; NiUJO: } } public function export(Request $request) { goto qlNCO; MGL_2: unset($request["\x66\x6f\162\155\141\x74"]); goto ke565; ZM1tg: return Excel::download(new ProfileASNExport($request), $fileName); goto jF5AN; NCRX0: $fileName = "\120\x72\157\146\151\154\145\x41\123\116\x5f" . date("\x59\x5f\x6d\x5f\x64\137\110\137\x69\137\163") . "\x2e{$format}"; goto IP5O_; ke565: $request = array_filter($request); goto ZM1tg; ne6tf: $format = $request["\146\157\x72\155\141\164"] ?? "\143\163\x76"; goto NCRX0; qlNCO: $request = $request->all(); goto ne6tf; IP5O_: unset($request["\137\x74\157\153\145\x6e"]); goto MGL_2; jF5AN: } }
