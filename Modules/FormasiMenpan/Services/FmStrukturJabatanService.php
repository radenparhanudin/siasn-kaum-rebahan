<?php
/*   _______________________________________
    |  Dikembangkan oleh - Raden Parhanudin |
    |    Whatsapp: https://6282342788059    |
    |_______________________________________|
*/
 namespace Modules\FormasiMenpan\services; use Modules\FormasiMenpan\Entities\FmStrukturJabatan; use Modules\FormasiMenpan\Repositories\FormasiMenpanRepository; class FmStrukturJabatanService { protected $formasiMenpanRepository; public function __construct(FormasiMenpanRepository $formasiMenpanRepository) { $this->formasiMenpanRepository = $formasiMenpanRepository; } public function tarik_data($request) { goto PcUiR; K6v13: $additional_headres = []; goto DjBks; szBwA: $results = collect($response["\162\x65\163\165\154\164\163"]); goto v6sxE; hrDIq: $path = "\57\157\x72\x67\141\x6e\151\163\141\x73\x69\x2f\163\x74\162\165\x6b\164\x75\162\x2d\x6a\141\142\x61\x74\x61\x6e\x2f\x74\x61\x72\151\x6b\x3f{$query}"; goto K6v13; DjBks: $response = $this->formasiMenpanRepository->get($path, $additional_headres); goto szBwA; v6sxE: foreach ($results->sortBy("\x70\x6f\163\x69\163\151\137\151\144") as $result) { $isExist = FmStrukturJabatan::find($result["\151\x64"]); if (!$isExist) { goto VOXRz; QAZvH: $result["\153\157\144\x65"] = $this->kode($result["\160\x61\x72\145\156\164\137\151\x64"]); goto eJAyD; TXepM: FmStrukturJabatan::create($result); goto O0NjF; PlLmI: $result["\154\145\x76\x65\154"] = $this->level($result["\160\141\162\145\156\x74\137\151\144"]); goto QAZvH; VOXRz: $result = $this->dataInsert($result); goto PlLmI; eJAyD: $result["\x68\x61\x76\x65\x5f\x63\x68\151\154\144"] = $this->have_child($result["\160\157\x73\x69\x73\151\x5f\x69\x64"]); goto TXepM; O0NjF: } else { FmStrukturJabatan::whereId($result["\x69\x64"])->update($result); } } goto gtnLq; PcUiR: $query = http_build_query(["\x70\141\162\x65\x6e\x74\137\151\x64" => $request->parent_id ?? null]); goto hrDIq; gtnLq: } public function delete($id) { goto UeD8L; OaGf4: $path = "\x2f\x6f\162\147\x61\x6e\x69\163\x61\163\151\57\x73\x74\162\x75\x6b\x74\x75\x72\x2d\152\x61\x62\x61\x74\141\x6e\x2f\x64\145\x74\141\151\x6c\77{$query}"; goto U1Zgm; U1Zgm: $additional_headres = []; goto cTngJ; UeD8L: $query = http_build_query(["\x69\x64" => $id]); goto OaGf4; cTngJ: return $this->formasiMenpanRepository->get($path, $additional_headres); goto Vp278; Vp278: } private function dataInsert($result) { return ["\x69\144" => $result["\151\x64"], "\x6e\x61\155\141" => $result["\156\141\x6d\141"], "\151\156\144\145\153\163" => $result["\151\156\144\x65\153\163"] ?? 0, "\141\x62\x6b" => $result["\x61\x62\x6b"] ?? 0, "\153\145\154\x61\x73" => $result["\x6b\x65\x6c\x61\x73"], "\x70\x6f\x73\151\x73\151\x5f\x69\144" => $result["\160\157\x73\151\x73\151\137\151\144"] ?? null, "\160\141\162\x65\156\164\x5f\151\x64" => $result["\160\141\162\x65\x6e\x74\x5f\x69\x64"] ?? null, "\162\151\x69\x6c" => $result["\162\151\151\x6c"] ?? 0, "\156\151\x70" => $result["\x6e\x69\160"] ?? 0, "\x63\165\162\x72\x65\156\x74\x70\156\163" => $result["\143\x75\x72\x72\x65\156\164\x70\x6e\163"] ?? 0, "\143\x75\x72\162\145\156\164\x70\160\160\153" => $result["\x63\x75\x72\x72\x65\156\164\160\x70\160\x6b"] ?? 0, "\143\x75\x72\x72\x65\x6e\164\x63\160\156\163" => $result["\143\x75\x72\x72\145\x6e\x74\143\160\x6e\x73"] ?? 0, "\143\x75\x72\162\145\x6e\164\154\x61\x69\156\156\171\141" => $result["\x63\165\162\x72\145\156\164\154\x61\x69\156\156\171\141"] ?? 0, "\156" => $result["\x6e"] ?? 0, "\x6e\61" => $result["\156\x31"] ?? 0, "\156\62" => $result["\156\x32"] ?? 0, "\156\x33" => $result["\x6e\x33"] ?? 0, "\x6e\64" => $result["\156\x34"] ?? 0, "\x74\156" => $result["\x74\156"] ?? 0, "\x6b" => $result["\153"] ?? 0, "\153\61" => $result["\x6b\x31"] ?? 0, "\153\x32" => $result["\153\62"] ?? 0, "\153\63" => $result["\153\63"] ?? 0, "\153\64" => $result["\153\64"] ?? 0, "\x74\x6b" => $result["\x74\153"] ?? 0, "\141\x6a\165\137\x70\156\x73\137\x32\60" => $result["\141\152\x75\137\x70\x6e\x73\x5f\62\60"] ?? 0, "\x61\152\x75\137\x70\x70\160\x6b\x5f\62\x30" => $result["\x61\x6a\165\x5f\160\x70\160\153\137\62\x30"] ?? 0, "\141\152\165\x5f\x69\x6e\160\141\163\x73\151\156\x67\x5f\62\60" => $result["\x61\152\x75\137\151\156\x70\x61\163\163\x69\156\x67\137\x32\60"] ?? 0, "\x61\152\165\137\163\164\x61\x6e\x5f\x32\x30" => $result["\x61\152\165\137\x73\x74\141\156\137\62\60"] ?? 0, "\141\x6a\x75\137\x74\157\x74\141\x6c\137\62\x30" => $result["\141\x6a\165\137\164\x6f\x74\x61\x6c\137\62\60"] ?? 0]; } private function level($parent_id) { if (empty($parent_id)) { $level = 1; } else { $parent = FmStrukturJabatan::find($parent_id); $level = $parent->level + 1; } return $level; } private function kode($parent_id) { if (empty($parent_id)) { $kode = "\x30\x30\x31"; } else { goto fWVKE; fWVKE: $parent = FmStrukturJabatan::find($parent_id); goto hnnqM; IL2JL: if (!isset($child)) { $kode = $parent->kode . "\55\60\x30\61"; } else { $new_kode = (int) substr($child->kode, -3); $kode = $parent->kode . sprintf("\x2d\x25\60\x33\x73", $new_kode + 1); } goto VZAqT; hnnqM: $child = FmStrukturJabatan::whereParentId($parent_id)->orderBy("\153\157\144\x65", "\144\x65\x73\x63")->first(); goto IL2JL; VZAqT: } return $kode; } public function have_child($posisi_id) { return str_contains("\x35", $posisi_id) ? 0 : 1; } }
